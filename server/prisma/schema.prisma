generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id        String        @id @default(uuid())
    createdAt DateTime      @default(now())
    email     String        @unique
    username  String        @unique
    password  String
    chats     ChatRoom[]
    messages  ChatMessage[]
}

model ChatRoom {
    id       String        @id @default(uuid())
    title    String?
    messages ChatMessage[]
    users    User[]
    userIds  String[]
}

model ChatMessage {
    id     String   @id @default(uuid())
    text   String
    chat   ChatRoom @relation(fields: [chatId], references: [id])
    chatId String
    user   User     @relation(fields: [userId], references: [id])
    userId String
}
